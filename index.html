<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>RugbySlate Animator</title>
  <style>
    * {
      padding: 0;
      margin: 0;
      touch-action: none;
    }
    canvas{
      display: block;
    }

  </style>
  <link rel="stylesheet" type="text/css" href="css/stylesheet.css">
  <link rel="stylesheet" type="text/css" href="css/playerEditModal.css">
  <link rel="stylesheet" type="text/css" href="css/addActorModal.css">
  <link rel="stylesheet" type="text/css" href="css/headerMenus.css">
  <link rel="stylesheet" type="text/css" href="css/all.css">
  <script src="p5.min.js"></script>
  <script src="globalVars.js"></script>
  <script src="sketch.js"></script>
  <script src="header.js"></script>
  <script src="body.js"></script>
  <script src="footer.js"></script>
  <script src="slider.js"></script>
  <script src="player.js"></script>
  <script src="item.js"></script>
  <script src="pitch.js"></script>
  <script src="modalFunctions.js"></script>
  <script src="download.js"></script> 


  <div class="headerMenuContainer" id="drawingHeaderMenu">
    <div class="toBeAffByCol" id="drawingPenColour" data-color="4" style="display: none;"></div>
    <div class="headerMenuClose" onclick="closeHeaderMenu('drawingHeaderMenu'); drawingMode=false">&times;</div>
    <div class="colorOptionsContainer headerColorOptions " id="colorOptionsDrawingEdit">
      <div class="colorOption" data-color="0" onclick="changeColorSelection(this)"></div>
      <div class="colorOption" data-color="1" onclick="changeColorSelection(this)"></div>
      <div class="colorOption" data-color="2" onclick="changeColorSelection(this)"></div>
      <div class="colorOption blackTick" data-color="3" onclick="changeColorSelection(this)"></div>
      <div class="colorOption active" data-color="4" onclick="changeColorSelection(this)">✔</div>
      <div class="colorOption blackTick" data-color="5" onclick="changeColorSelection(this)"></div>
    </div>

    <button id="drawUndoButton" class="headerButton fas fa-undo-alt" onclick="drawingUndo()"> </button>
  </div>

  <div class="headerMenuContainer" id="speedHeaderMenu">
    <div class="headerMenuClose" onclick="closeHeaderMenu('speedHeaderMenu'); showSliderSpeedLoc = undefined">&times;</div>
    <div class="headerOption">
      <select class="" id="speedTargetDropDown" onchange="setSpeedSlider()">
        <option value="0">Global</option>
      </select>
    </div>
    <div class="headerOption">
      <input type="range" min="1" max="100" value="30" id="globalSpeedSlider" class="headerSlider" oninput="updateGlobalSliderIncrement()">
    </div>
  </div>

  <div class="headerMenuContainer" id="pitchHeaderMenu">
    <div class="headerMenuClose" onclick="closeHeaderMenu('pitchHeaderMenu'); pitchMode = false">&times;</div>
    <button class="headerButton" onclick="pitchLandscape = !pitchLandscape; console.log('Flipped')"> 
      <i class="fas fa-sync-alt"></i>
    </button>
    <div class="headerOption">
      <input type="range" min="1" max="100" value="25" class="headerSlider" id="pitchZoomSlider" oninput="pitchZoom()">
    </div>
  </div>

</head>

<body>
 

<div id="canvasContainer">
  <div id="sideNavMenu" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeSideNavMenu()">&times;</a>
    <a onclick="openHeaderMenu('pitchHeaderMenu'); closeSideNavMenu(); pitchMode = true">Pitch</a>
    <a href="#">Save</a>
    <a href="#">Load</a>
    <a onclick="startRecordingCanvas()">Export</a>
    <a href="#">Exit</a>
  </div>
  <div id="sideNavMenuCover" class="modal" onclick="closeSideNavMenu()"></div>

  <div id="headerButtonContainer">
    <button class="headerButton" onclick="openSideNavMenu()"> 
      <i class="fas fa-bars"></i> 
    </button>
    <button class="headerButton " onclick="showDomElement('addActorModal')">
      <i class="fas fa-plus-circle"></i> 
    </button>
    <button class="headerButton" onclick="openHeaderMenu('drawingHeaderMenu'); drawingMode=true"> 
      <i class="fas fa-pen"></i> 
    </button>
    <button class="headerButton" onclick="openHeaderMenu('speedHeaderMenu'); populateSpeedDropDown()">
      <i class="far fa-clock"></i> 
     </button>
 </div>

</div>


</body>

<footer>
  <div id="playerEditModal" class="modal" onclick="hideDomElement('playerEditModal')">
    <div class="modal-content" onclick="event.stopPropagation()">
      <span class="close" onclick="hideDomElement('playerEditModal')">
      &times;</span>
      <p class="modalTitle">Player Edit</p>  
      <div class="modalBody">

        <div class="showPlayer toBeAffByCol" id="selectedPlayer">19</div>
        <p>Edit colour:</p>
        <div class="colorOptionsContainer" id="colorOptionsPlayerEdit">
            <div class="colorOption active" data-color="0" onclick="changeColorSelection(this)">✔</div>
            <div class="colorOption" data-color="1" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="2" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="3" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="4" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="5" onclick="changeColorSelection(this)"></div>
          </div>

        <div class="modalOptionContainer">
          <p class="modalOptionText">Edit Number:</p>
          <input type="number" min="1" max="99" class="playerNumberInput" id="selectedPlayerInput" oninput="updateSelectedPlayerNumber('selectedPlayer', 'selectedPlayerInput')">
        </div>

         <div class="modalOptionContainer">
          <p class="modalOptionText">Show Lines:</p>
          <label class="switch">
            <input type="checkbox" id="showLines">
            <span class="slider round"></span>
          </label>
        </div>

        <div class="modalButtonContainer">
           <button class="modalButton" onclick="applyPlayerEdits()">Apply Changes</button>
          <button class="modalButton" onclick="deletePlayer()">Delete Player</button>
        </div>
      </div>

    </div>
  </div>

  <div id="itemEditModal" class="modal" onclick="hideDomElement('itemEditModal')">
    <div class="modal-content" onclick="event.stopPropagation()">
      <span class="close" onclick="hideDomElement('itemEditModal')">
      &times;</span>
      <p class="modalTitle">Item Edit</p>  
      <div class="modalBody">

        <div class="showPlayer toBeAffByCol" id="selectedItem"></div>
        <p>Edit colour:</p>
        <div class="colorOptionsContainer" id="colorOptionsItemEdit">
            <div class="colorOption active" data-color="0" onclick="changeColorSelection(this)">✔</div>
            <div class="colorOption" data-color="1" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="2" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="3" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="4" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="5" onclick="changeColorSelection(this)"></div>
          </div>
        <div class="modalButtonContainer">
           <!-- TODO -->
           <button class="modalButton" onclick="applyItemEdits()">Apply Changes</button> 
          <button class="modalButton" onclick="deleteItem()">Delete Item</button>
        </div>
      </div>

    </div>
  </div>

  <div id="addActorModal" class="modal" onclick="hideDomElement('addActorModal')">
    <div class="modal-content"  onclick="event.stopPropagation()" >
      <span class="close" onclick="hideDomElement('addActorModal')">
      &times;</span>
      <p class="modalTitle">Add Actor</p>  
      <div class="modalBody">
        <div class="modalTabContainer">
          <button class="modalTabButton active" onclick="changeTab(event,'addPlayerContainer')">Add Player</button>
          <button class="modalTabButton" onclick="changeTab(event,'addItemContainer')">Add Item</button>
        </div>

        <div id="addPlayerContainer" class="tabcontent">
          <div class="showPlayer toBeAffByCol" id="playerToAdd" data-color="0">10</div>
          <p>Edit colour:</p>
          <div class="colorOptionsContainer" id="colorOptionsPlayerAdd">
            <div class="colorOption active" data-color="0" onclick="changeColorSelection(this)">✔</div>
            <div class="colorOption" data-color="1" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="2" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="3" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="4" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="5" onclick="changeColorSelection(this)"></div>
          </div>

          <div class="modalOptionContainer">
            <p class="modalOptionText">Edit Number:</p>
            <input type="number" min="1" max="99" class="playerNumberInput" id="playerToAddInput" value="10" oninput="updateSelectedPlayerNumber('playerToAdd', 'playerToAddInput')">
          </div>

           <div class="modalOptionContainer">
            <p class="modalOptionText">Show Lines:</p>
            <label class="switch">
              <input type="checkbox" id="addPlayerShowLines">
              <span class="slider round"></span>
            </label>
          </div>

          <div class="modalButtonContainer">
             <button class="modalButton" onclick="addNewPlayer()">Add Player</button>
          </div>
        </div>

        <div id="addItemContainer" class="tabcontent">
          
          <p>Select Item:</p>
          <div id="itemOptionsContainer">
            <div class="itemOption active" onclick="changeSelectedItem(this)" > 
              <div class="itemImage  toBeAffByCol" id="itemToAdd" data-thisItemType="0" data-targItemType="0" data-color="5"> </div>
              <p class="itemName"> Ball </p>
            </div>
            <div class="itemOption " onclick="changeSelectedItem(this)"> 
              <div class="itemImage  toBeAffByCol" data-thisItemType="1" id="coneItem">  </div>
              <p class="itemName"> Cone </p>
            </div>
            <div class="itemOption " onclick="changeSelectedItem(this)"> 
              <div class="itemImage  toBeAffByCol" data-thisItemType="2" id="padItem">  </div>
              <p class="itemName"> Pad </p>
            </div>
          </div>

          <p>Edit colour:</p>
          <div class="colorOptionsContainer">
            <div class="colorOption active" data-color="0" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="1" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="2" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="3" onclick="changeColorSelection(this)"></div>
            <div class="colorOption" data-color="4" onclick="changeColorSelection(this)"></div>
            <div class="colorOption blackTick" data-color="5" onclick="changeColorSelection(this)">✔</div>
          </div>

          <div class="modalButtonContainer">
             <button class="modalButton" onclick="addNewItem()">Add Item</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div id="animationEditModal" class="modal" onclick="hideDomElement('animationEditModal'); addBetweenFrameLoc = undefined; deleteFrameLoc = undefined; ">
    <div class="modal-content" onclick="event.stopPropagation()">
      <span class="close" onclick="hideDomElement('animationEditModal'); addBetweenFrameLoc = undefined; deleteFrameLoc = undefined;">
      &times;</span>
      <p class="modalTitle">Animation Edit</p>  
      <div class="modalBody">

        <div class="modalTabContainer">
          <button class="modalTabButton active" id="addFrameTab" onclick="changeTab(event,'addFrameContainer'); populateAddFrameEditor(); deleteFrameLoc = undefined">Add Frame</button>
          <button class="modalTabButton" onclick="changeTab(event,'deleteFrameContainer'); addBetweenFrameLoc = undefined; populateDeleteFrameEditor();">Delete Frame</button>
        </div>

        <div id="addFrameContainer" class="tabcontent">
          <p>Add a Frame:</p>
          <div class="frameSelector" id="addingFrameSelector">
            <button class="frameSelButton " id="addFrameSelDecr" onclick="updateAddingFrameSelector(false)" disabled=true> 
              <i class="fas fa-arrow-alt-circle-left"></i> 
            </button>
            <div class="frameSelText" id="addingFrameSelText" data-frameNum="0" >At Start</div>
            <button class="frameSelButton" id="addFrameSelIncr" onclick="updateAddingFrameSelector(true)">
              <i class="fas fa-arrow-alt-circle-right"></i> 
            </button>
          </div>
          <div class="modalButtonContainer">
            <button class="modalButton" onclick="addFrame();">Add Frame</button>
          </div> 
        </div>
        
        <div id="deleteFrameContainer" class="tabcontent">
          <p>Delete a Frame:</p>
          
            <div class="frameSelector" id="deleteFrameSelector">
            <button class="frameSelButton" id="deleteFrameSelDecr" onclick="updateDeleteFrameSelector(false)" disabled=true> <i class="fas fa-arrow-alt-circle-left"></i>  </button>
            <div class="frameSelText" id="deletingFrameSelText" data-frameNum="0" >Frame 1</div>
            <button class="frameSelButton" id="deleteFrameSelIncr" onclick="updateDeleteFrameSelector(true)" > <i class="fas fa-arrow-alt-circle-right"></i>  </button>
          </div>
          <div class="modalButtonContainer">  
             <button class="modalButton" onclick="deleteFrame();">Delete Frame</button> 
          </div>
        </div>  

      </div>

    </div>
  </div>

  <div id="animationButtonContainer">
    <div id="animationFlex">
      <button class="animationButton fas fa-film" id="editAnimationBut" onclick="showDomElement('animationEditModal'); document.getElementById('addFrameTab').click();">
        <div class="buttonUnderText"> Edit Frames </div>
      </button>
      <button class="animationButton fas fa-play" id="playAnimationBut" onclick="playPause()">
        <div class="buttonUnderText" id="playAnimationText"> Play Animation </div>
      </button>
      <button class="animationButton far fa-save" id="saveFrameBut" onclick="saveLocations()">
        <div class="buttonUnderText"> Save Frame </div>
      </button>
    </div>
  </div>

  <div id="exportedGIF" class="modal" onclick="hideDomElement('exportedGIF')">
    <div class="modal-content" onclick="event.stopPropagation()">
     <img src="" style="max-width: 90%; ">
   </div>
  </div>

<div id="testy" style="height: 100%; width: 100%; z-index: 100; position: fixed; left: 0; top: 0; background: #555; visibility: hidden">
  testy
</div>

  <script src="recordCanvas.js"></script>
</footer>

</html>